import{e as t,C as e,R as i,n as s,t as r,i as n,c as a,k as d,j as l,o,f as c,F as g,D as x,p as m,m as v}from"./index-DCtdVlbU.js";import{a as h,b as u,c as b,u as p,d as f}from"./index-BA7OnkC-.js";var y=r('<svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor stroke-width=2><path stroke-linecap=round stroke-linejoin=round d="M10 19l-7-7m0 0l7-7m-7 7h18">'),C=r("<div class=space-y-6>"),S=r('<div class="mt-4 rounded-md border border-blue-900 p-3 bg-slate-900"><div class="text-sm text-gray-100 mb-2">New dental chart</div><div class="mt-3 flex items-center gap-2"><button class="px-3 py-1.5 rounded-md bg-blue-600 text-white text-sm">Save</button><button class="px-3 py-1.5 rounded-md border text-sm">Cancel'),w=r('<div class="rounded-lg shadow-sm border border-gray-200 p-6"><div class="flex items-center justify-between mb-4"><h3 class="text-md font-semibold text-gray-100">Dental charts</h3><button class="px-3 py-1.5 rounded-md border text-sm hover:bg-gray-50">New chart'),k=r("<div class=text-gray-200>Loading charts…"),$=r('<div class="text-sm text-gray-300">No charts yet'),_=r('<div class="rounded-md border border-gray-800 p-3"><div class="text-xs text-gray-400 mb-2"> • <!> • <!> • '),D=r('<div class="flex items-center justify-center h-64 text-gray-200">Loading...'),j=r('<div class="flex items-center justify-center h-64 text-red-600">Failed to load patient'),L=r('<div class="grid grid-cols-1 lg:grid-cols-3 gap-6"><div class="rounded-lg shadow-sm border border-gray-200 p-6"><div class="flex items-center gap-4"><div></div><div><div class="text-xl font-semibold text-gray-100"> </div><div class="text-sm text-gray-200">ID: </div></div></div><div class="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm"><div><div class=text-gray-200>Date of birth</div><div class=font-medium></div></div><div><div class=text-gray-200>Sex</div><div><span></span></div></div><div><div class=text-gray-200>Phone</div><div class=font-medium></div></div><div><div class=text-gray-200>Email</div><div class=font-medium></div></div><div class=sm:col-span-2><div class=text-gray-200>Address</div><div class=font-medium></div></div></div></div><div class="lg:col-span-2 space-y-6"><div class="rounded-lg shadow-sm border border-gray-200 p-6"><h2 class="text-lg font-semibold text-gray-100 mb-4">Quick actions</h2><div class="flex flex-wrap items-center gap-3"><button class="px-4 py-2 rounded-md border text-sm hover:bg-gray-50">Schedule appointment</button><button class="px-4 py-2 rounded-md border text-sm hover:bg-gray-50">Add treatment record</button><button class="px-4 py-2 rounded-md border text-sm text-red-600 hover:bg-red-50">Delete patient</button></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="rounded-lg shadow-sm border border-gray-200 p-6"><h3 class="text-md font-semibold text-gray-100 mb-2">Upcoming appointments</h3><div class="text-sm text-gray-200">No upcoming appointments</div></div><div class="rounded-lg shadow-sm border border-gray-200 p-6"><h3 class="text-md font-semibold text-gray-100 mb-2">Recent treatments</h3><div class="text-sm text-gray-200">No recent treatments'),P=r('<div class="min-h-screen p-6 space-y-6"><div class="flex items-start justify-between gap-3"><div class="flex items-center gap-3"><button class="flex items-center gap-2 text-gray-300 hover:text-gray-100"><span>Back</span></button></div><div class=text-right><h1 class="text-2xl font-bold text-gray-100">Patient Profile</h1><p class="text-sm text-gray-200">Overview and actions');const N=()=>y();function A(t){const[e,i]=c(!1),s={teeth:{}};return(r=w()).firstChild.firstChild.nextSibling.$$click=()=>i(!0),n(r,a(d,{get when(){return!t.isLoading},get fallback(){return k()},get children(){return a(d,{get when(){return m(()=>!!t.charts)()&&t.charts.length>0},get fallback(){return $()},get children(){var e=C();return n(e,a(g,{get each(){return t.charts},children:t=>{return e=_(),i=e.firstChild,s=i.firstChild,r=s.nextSibling,(d=r.nextSibling.nextSibling).nextSibling,n(i,()=>t.chart_type,s),n(i,()=>t.notation_system,r),n(i,()=>t.dentition,d),n(i,()=>new Date(t.created).toLocaleString(),null),n(e,a(x,{get value(){return t.chart_state},readOnly:!0}),null),e;var e,i,s,r,d}})),e}})}}),null),n(r,a(d,{get when(){return e()},get children(){var e=S(),r=e.firstChild.nextSibling,d=r.firstChild,l=d.nextSibling;return n(e,a(x,{value:s,onChange:()=>{}}),r),d.$$click=async()=>{await t.onCreate(s),i(!1)},l.$$click=()=>i(!1),e}}),null),r;var r}const B=function(){const r=t(),c=()=>i.useParams()().patientId,g=h(e.Patients,c()),x=u(e.Patients),m=b(e.DentalCharts,{perPage:10,filter:`patient.id = "${c()}"`,sort:"-created"}),v=p(e.DentalCharts),y=s(()=>g.data);return f(e.Patients,c()),C=P(),S=C.firstChild.firstChild.firstChild,w=S.firstChild,S.$$click=()=>r({to:"/patients"}),n(S,a(N,{}),w),n(C,a(d,{get when(){return g.isLoading},get children(){return D()}}),null),n(C,a(d,{get when(){return g.isError},get children(){return j()}}),null),n(C,a(d,{get when(){return y()},get children(){var t=L(),e=t.firstChild,i=e.firstChild,s=i.firstChild,d=s.nextSibling.firstChild,g=d.firstChild,h=d.nextSibling;h.firstChild;var u=i.nextSibling.firstChild,b=u.firstChild.nextSibling,p=u.nextSibling,f=p.firstChild.nextSibling.firstChild,C=p.nextSibling,S=C.firstChild.nextSibling,w=C.nextSibling,k=w.firstChild.nextSibling,$=w.nextSibling.firstChild.nextSibling,_=e.nextSibling,D=_.firstChild,j=D.firstChild.nextSibling.firstChild,P=j.nextSibling,N=P.nextSibling,B=D.nextSibling;return n(s,()=>(y().first_name[0]+y().last_name[0]).toUpperCase()),n(d,()=>y().first_name,g),n(d,()=>y().last_name,null),n(h,()=>y().id,null),n(b,()=>new Date(y().dob).toLocaleDateString()),n(f,()=>y().sex),n(S,()=>y().phone),n(k,()=>y().email||"-"),n($,()=>y().address||"-"),j.$$click=()=>r({to:`/appointments/new?patient=${c()}`}),P.$$click=()=>r({to:`/treatments/new?patient=${c()}`}),N.$$click=()=>x.mutate({id:c()}),n(_,a(A,{get patient(){return y()},get charts(){return m.data?.items},get isLoading(){return m.isLoading},onCreate:async t=>{await v.mutateAsync({data:{patient:[c()],clinic:y().primary_clinic,doctor:[],chart_type:"initial",notation_system:"universal",dentition:"permanent",chart_state:t}})}}),B),l(t=>{var e="h-16 w-16 rounded-full flex items-center justify-center text-lg font-semibold "+("male"===y().sex?"bg-blue-50 text-blue-700":"bg-pink-50 text-pink-700"),i="px-2 py-1 rounded-full text-xs font-medium "+("male"===y().sex?"bg-blue-50 text-blue-700":"bg-pink-50 text-pink-700");return e!==t.e&&o(s,t.e=e),i!==t.t&&o(f,t.t=i),t},{e:void 0,t:void 0}),t}}),null),C;var C,S,w};v(["click"]);export{B as component};
