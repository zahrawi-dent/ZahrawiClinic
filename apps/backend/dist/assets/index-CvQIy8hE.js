(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();const es=!1,ts=(t,e)=>t===e,X=Symbol("solid-proxy"),Ue=Symbol("solid-track"),Ce={equals:ts};let Ot=Et;const G=1,Pe=2,Ct={owned:null,cleanups:null,context:null,owner:null},Fe={};var O=null;let De=null,ss=null,P=null,I=null,H=null,je=0;function we(t,e){const s=P,n=O,i=t.length===0,r=e===void 0?n:e,a=i?Ct:{owned:null,cleanups:null,context:r?r.context:null,owner:r},o=i?t:()=>t(()=>_(()=>de(a)));O=a,P=null;try{return W(o,!0)}finally{P=s,O=n}}function N(t,e){e=e?Object.assign({},Ce,e):Ce;const s={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},n=i=>(typeof i=="function"&&(i=i(s.value)),At(s,i));return[Rt.bind(s),n]}function ne(t,e,s){const n=ke(t,e,!0,G);ce(n)}function oe(t,e,s){const n=ke(t,e,!1,G);ce(n)}function Pt(t,e,s){Ot=ds;const n=ke(t,e,!1,G);n.user=!0,H?H.push(n):ce(n)}function M(t,e,s){s=s?Object.assign({},Ce,s):Ce;const n=ke(t,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=s.equals||void 0,ce(n),Rt.bind(n)}function ns(t){return t&&typeof t=="object"&&"then"in t}function is(t,e,s){let n,i,r;typeof e=="function"?(n=t,i=e,r={}):(n=!0,i=t,r=e||{});let a=null,o=Fe,c=!1,u="initialValue"in r,l=typeof n=="function"&&M(n);const h=new Set,[f,g]=(r.storage||N)(r.initialValue),[y,d]=N(void 0),[S,b]=N(void 0,{equals:!1}),[m,w]=N(u?"ready":"unresolved");function p(R,C,j,k){return a===R&&(a=null,k!==void 0&&(u=!0),(R===o||C===o)&&r.onHydrated&&queueMicrotask(()=>r.onHydrated(k,{value:C})),o=Fe,v(C,j)),C}function v(R,C){W(()=>{C===void 0&&g(()=>R),w(C!==void 0?"errored":u?"ready":"unresolved"),d(C);for(const j of h.keys())j.decrement();h.clear()},!1)}function A(){const R=us,C=f(),j=y();if(j!==void 0&&!a)throw j;return P&&P.user,C}function E(R=!0){if(R!==!1&&c)return;c=!1;const C=l?l():n;if(C==null||C===!1){p(a,_(f));return}let j;const k=o!==Fe?o:_(()=>{try{return i(C,{value:f(),refetching:R})}catch(le){j=le}});if(j!==void 0){p(a,void 0,Se(j),C);return}else if(!ns(k))return p(a,k,void 0,C),k;return a=k,"v"in k?(k.s===1?p(a,k.v,void 0,C):p(a,void 0,Se(k.v),C),k):(c=!0,queueMicrotask(()=>c=!1),W(()=>{w(u?"refreshing":"pending"),b()},!1),k.then(le=>p(k,le,void 0,C),le=>p(k,void 0,Se(le),C)))}Object.defineProperties(A,{state:{get:()=>m()},error:{get:()=>y()},loading:{get(){const R=m();return R==="pending"||R==="refreshing"}},latest:{get(){if(!u)return A();const R=y();if(R&&!a)throw R;return f()}}});let q=O;return l?ne(()=>(q=O,E(!1))):E(!1),[A,{refetch:R=>as(q,()=>E(R)),mutate:g}]}function rs(t){return W(t,!1)}function _(t){if(P===null)return t();const e=P;P=null;try{return t()}finally{P=e}}function ve(t,e,s){const n=Array.isArray(t);let i,r=s&&s.defer;return a=>{let o;if(n){o=Array(t.length);for(let u=0;u<t.length;u++)o[u]=t[u]()}else o=t();if(r)return r=!1,a;const c=_(()=>e(o,i,a));return i=o,c}}function os(t){Pt(()=>_(t))}function ye(t){return O===null||(O.cleanups===null?O.cleanups=[t]:O.cleanups.push(t)),t}function Me(){return P}function as(t,e){const s=O,n=P;O=t,P=null;try{return W(e,!0)}catch(i){Ze(i)}finally{O=s,P=n}}const[Bn,Hn]=N(!1);function Ye(t,e){const s=Symbol("context");return{id:s,Provider:fs(s),defaultValue:t}}function Xe(t){let e;return O&&O.context&&(e=O.context[t.id])!==void 0?e:t.defaultValue}function cs(t){const e=M(t),s=M(()=>Qe(e()));return s.toArray=()=>{const n=s();return Array.isArray(n)?n:n!=null?[n]:[]},s}let us;function Rt(){if(this.sources&&this.state)if(this.state===G)ce(this);else{const t=I;I=null,W(()=>Ae(this),!1),I=t}if(P){const t=this.observers?this.observers.length:0;P.sources?(P.sources.push(this),P.sourceSlots.push(t)):(P.sources=[this],P.sourceSlots=[t]),this.observers?(this.observers.push(P),this.observerSlots.push(P.sources.length-1)):(this.observers=[P],this.observerSlots=[P.sources.length-1])}return this.value}function At(t,e,s){let n=t.value;return(!t.comparator||!t.comparator(n,e))&&(t.value=e,t.observers&&t.observers.length&&W(()=>{for(let i=0;i<t.observers.length;i+=1){const r=t.observers[i],a=De&&De.running;a&&De.disposed.has(r),(a?!r.tState:!r.state)&&(r.pure?I.push(r):H.push(r),r.observers&&Tt(r)),a||(r.state=G)}if(I.length>1e6)throw I=[],new Error},!1)),e}function ce(t){if(!t.fn)return;de(t);const e=je;ls(t,t.value,e)}function ls(t,e,s){let n;const i=O,r=P;P=O=t;try{n=t.fn(e)}catch(a){return t.pure&&(t.state=G,t.owned&&t.owned.forEach(de),t.owned=null),t.updatedAt=s+1,Ze(a)}finally{P=r,O=i}(!t.updatedAt||t.updatedAt<=s)&&(t.updatedAt!=null&&"observers"in t?At(t,n):t.value=n,t.updatedAt=s)}function ke(t,e,s,n=G,i){const r={fn:t,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:O,context:O?O.context:null,pure:s};return O===null||O!==Ct&&(O.owned?O.owned.push(r):O.owned=[r]),r}function Re(t){if(t.state===0)return;if(t.state===Pe)return Ae(t);if(t.suspense&&_(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<je);)t.state&&e.push(t);for(let s=e.length-1;s>=0;s--)if(t=e[s],t.state===G)ce(t);else if(t.state===Pe){const n=I;I=null,W(()=>Ae(t,e[0]),!1),I=n}}function W(t,e){if(I)return t();let s=!1;e||(I=[]),H?s=!0:H=[],je++;try{const n=t();return hs(s),n}catch(n){s||(H=null),I=null,Ze(n)}}function hs(t){if(I&&(Et(I),I=null),t)return;const e=H;H=null,e.length&&W(()=>Ot(e),!1)}function Et(t){for(let e=0;e<t.length;e++)Re(t[e])}function ds(t){let e,s=0;for(e=0;e<t.length;e++){const n=t[e];n.user?t[s++]=n:Re(n)}for(e=0;e<s;e++)Re(t[e])}function Ae(t,e){t.state=0;for(let s=0;s<t.sources.length;s+=1){const n=t.sources[s];if(n.sources){const i=n.state;i===G?n!==e&&(!n.updatedAt||n.updatedAt<je)&&Re(n):i===Pe&&Ae(n,e)}}}function Tt(t){for(let e=0;e<t.observers.length;e+=1){const s=t.observers[e];s.state||(s.state=Pe,s.pure?I.push(s):H.push(s),s.observers&&Tt(s))}}function de(t){let e;if(t.sources)for(;t.sources.length;){const s=t.sources.pop(),n=t.sourceSlots.pop(),i=s.observers;if(i&&i.length){const r=i.pop(),a=s.observerSlots.pop();n<i.length&&(r.sourceSlots[a]=n,i[n]=r,s.observerSlots[n]=a)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)de(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)de(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Se(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Ze(t,e=O){throw Se(t)}function Qe(t){if(typeof t=="function"&&!t.length)return Qe(t());if(Array.isArray(t)){const e=[];for(let s=0;s<t.length;s++){const n=Qe(t[s]);Array.isArray(n)?e.push.apply(e,n):e.push(n)}return e}return t}function fs(t,e){return function(n){let i;return oe(()=>i=_(()=>(O.context={...O.context,[t]:n.value},cs(()=>n.children))),void 0),i}}const ps=Symbol("fallback");function at(t){for(let e=0;e<t.length;e++)t[e]()}function ys(t,e,s={}){let n=[],i=[],r=[],a=0,o=e.length>1?[]:null;return ye(()=>at(r)),()=>{let c=t()||[],u=c.length,l,h;return c[Ue],_(()=>{let g,y,d,S,b,m,w,p,v;if(u===0)a!==0&&(at(r),r=[],n=[],i=[],a=0,o&&(o=[])),s.fallback&&(n=[ps],i[0]=we(A=>(r[0]=A,s.fallback())),a=1);else if(a===0){for(i=new Array(u),h=0;h<u;h++)n[h]=c[h],i[h]=we(f);a=u}else{for(d=new Array(u),S=new Array(u),o&&(b=new Array(u)),m=0,w=Math.min(a,u);m<w&&n[m]===c[m];m++);for(w=a-1,p=u-1;w>=m&&p>=m&&n[w]===c[p];w--,p--)d[p]=i[w],S[p]=r[w],o&&(b[p]=o[w]);for(g=new Map,y=new Array(p+1),h=p;h>=m;h--)v=c[h],l=g.get(v),y[h]=l===void 0?-1:l,g.set(v,h);for(l=m;l<=w;l++)v=n[l],h=g.get(v),h!==void 0&&h!==-1?(d[h]=i[l],S[h]=r[l],o&&(b[h]=o[l]),h=y[h],g.set(v,h)):r[l]();for(h=m;h<u;h++)h in d?(i[h]=d[h],r[h]=S[h],o&&(o[h]=b[h],o[h](h))):i[h]=we(f);i=i.slice(0,a=u),n=c.slice(0)}return i});function f(g){if(r[h]=g,o){const[y,d]=N(h);return o[h]=d,e(c[h],y)}return e(c[h])}}}function D(t,e){return _(()=>t(e||{}))}const gs=t=>`Stale read from <${t}>.`;function bs(t){const e="fallback"in t&&{fallback:()=>t.fallback};return M(ys(()=>t.each,t.children,e||void 0))}function Oe(t){const e=t.keyed,s=M(()=>t.when,void 0,void 0),n=e?s:M(s,void 0,{equals:(i,r)=>!i==!r});return M(()=>{const i=n();if(i){const r=t.children;return typeof r=="function"&&r.length>0?_(()=>r(e?i:()=>{if(!_(n))throw gs("Show");return s()})):r}return t.fallback},void 0,void 0)}const ms=t=>M(()=>t());function ws(t,e,s){let n=s.length,i=e.length,r=n,a=0,o=0,c=e[i-1].nextSibling,u=null;for(;a<i||o<r;){if(e[a]===s[o]){a++,o++;continue}for(;e[i-1]===s[r-1];)i--,r--;if(i===a){const l=r<n?o?s[o-1].nextSibling:s[r-o]:c;for(;o<r;)t.insertBefore(s[o++],l)}else if(r===o)for(;a<i;)(!u||!u.has(e[a]))&&e[a].remove(),a++;else if(e[a]===s[r-1]&&s[o]===e[i-1]){const l=e[--i].nextSibling;t.insertBefore(s[o++],e[a++].nextSibling),t.insertBefore(s[--r],l),e[i]=s[r]}else{if(!u){u=new Map;let h=o;for(;h<r;)u.set(s[h],h++)}const l=u.get(e[a]);if(l!=null)if(o<l&&l<r){let h=a,f=1,g;for(;++h<i&&h<r&&!((g=u.get(e[h]))==null||g!==l+f);)f++;if(f>l-o){const y=e[a];for(;o<l;)t.insertBefore(s[o++],y)}else t.replaceChild(s[o++],e[a++])}else a++;else e[a++].remove()}}}function vs(t,e,s,n={}){let i;return we(r=>{i=r,e===document?t():Q(e,t(),e.firstChild?null:void 0,s)},n.owner),()=>{i(),e.textContent=""}}function K(t,e,s,n){let i;const r=()=>{const o=document.createElement("template");return o.innerHTML=t,o.content.firstChild},a=()=>(i||(i=r())).cloneNode(!0);return a.cloneNode=a,a}function Q(t,e,s,n){if(s!==void 0&&!n&&(n=[]),typeof e!="function")return Ee(t,e,n,s);oe(i=>Ee(t,e(),i,s),n)}function Ee(t,e,s,n,i){for(;typeof s=="function";)s=s();if(e===s)return s;const r=typeof e,a=n!==void 0;if(t=a&&s[0]&&s[0].parentNode||t,r==="string"||r==="number"){if(r==="number"&&(e=e.toString(),e===s))return s;if(a){let o=s[0];o&&o.nodeType===3?o.data!==e&&(o.data=e):o=document.createTextNode(e),s=te(t,s,n,o)}else s!==""&&typeof s=="string"?s=t.firstChild.data=e:s=t.textContent=e}else if(e==null||r==="boolean")s=te(t,s,n);else{if(r==="function")return oe(()=>{let o=e();for(;typeof o=="function";)o=o();s=Ee(t,o,s,n)}),()=>s;if(Array.isArray(e)){const o=[],c=s&&Array.isArray(s);if(Ne(o,e,s,i))return oe(()=>s=Ee(t,o,s,n,!0)),()=>s;if(o.length===0){if(s=te(t,s,n),a)return s}else c?s.length===0?ct(t,o,n):ws(t,s,o):(s&&te(t),ct(t,o));s=o}else if(e.nodeType){if(Array.isArray(s)){if(a)return s=te(t,s,n,e);te(t,s,null,e)}else s==null||s===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);s=e}}return s}function Ne(t,e,s,n){let i=!1;for(let r=0,a=e.length;r<a;r++){let o=e[r],c=s&&s[t.length],u;if(!(o==null||o===!0||o===!1))if((u=typeof o)=="object"&&o.nodeType)t.push(o);else if(Array.isArray(o))i=Ne(t,o,c)||i;else if(u==="function")if(n){for(;typeof o=="function";)o=o();i=Ne(t,Array.isArray(o)?o:[o],Array.isArray(c)?c:[c])||i}else t.push(o),i=!0;else{const l=String(o);c&&c.nodeType===3&&c.data===l?t.push(c):t.push(document.createTextNode(l))}}return i}function ct(t,e,s=null){for(let n=0,i=e.length;n<i;n++)t.insertBefore(e[n],s)}function te(t,e,s,n){if(s===void 0)return t.textContent="";const i=n||document.createTextNode("");if(e.length){let r=!1;for(let a=e.length-1;a>=0;a--){const o=e[a];if(i!==o){const c=o.parentNode===t;!r&&!a?c?t.replaceChild(i,o):t.insertBefore(i,s):c&&o.remove()}else r=!0}}else t.insertBefore(i,s);return[i]}var ue=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ae=typeof window>"u"||"Deno"in globalThis;function F(){}function Ss(t,e){return typeof t=="function"?t(e):t}function _e(t){return typeof t=="number"&&t>=0&&t!==1/0}function It(t,e){return Math.max(t+(e||0)-Date.now(),0)}function J(t,e){return typeof t=="function"?t(e):t}function U(t,e){return typeof t=="function"?t(e):t}function ut(t,e){const{type:s="all",exact:n,fetchStatus:i,predicate:r,queryKey:a,stale:o}=t;if(a){if(n){if(e.queryHash!==et(a,e.options))return!1}else if(!fe(e.queryKey,a))return!1}if(s!=="all"){const c=e.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||i&&i!==e.state.fetchStatus||r&&!r(e))}function lt(t,e){const{exact:s,status:n,predicate:i,mutationKey:r}=t;if(r){if(!e.options.mutationKey)return!1;if(s){if(Z(e.options.mutationKey)!==Z(r))return!1}else if(!fe(e.options.mutationKey,r))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function et(t,e){return(e?.queryKeyHashFn||Z)(t)}function Z(t){return JSON.stringify(t,(e,s)=>Ke(s)?Object.keys(s).sort().reduce((n,i)=>(n[i]=s[i],n),{}):s)}function fe(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(s=>fe(t[s],e[s])):!1}function qt(t,e){if(t===e)return t;const s=ht(t)&&ht(e);if(s||Ke(t)&&Ke(e)){const n=s?t:Object.keys(t),i=n.length,r=s?e:Object.keys(e),a=r.length,o=s?[]:{},c=new Set(n);let u=0;for(let l=0;l<a;l++){const h=s?l:r[l];(!s&&c.has(h)||s)&&t[h]===void 0&&e[h]===void 0?(o[h]=void 0,u++):(o[h]=qt(t[h],e[h]),o[h]===t[h]&&t[h]!==void 0&&u++)}return i===a&&u===i?t:o}return e}function Te(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function ht(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ke(t){if(!dt(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!dt(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function dt(t){return Object.prototype.toString.call(t)==="[object Object]"}function Os(t){return new Promise(e=>{setTimeout(e,t)})}function $e(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?qt(t,e):e}function Cs(t,e,s=0){const n=[...t,e];return s&&n.length>s?n.slice(1):n}function Ps(t,e,s=0){const n=[e,...t];return s&&n.length>s?n.slice(0,-1):n}var tt=Symbol();function jt(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===tt?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function kt(t,e){return typeof t=="function"?t(...e):!!t}var Rs=class extends ue{#t;#e;#s;constructor(){super(),this.#s=t=>{if(!ae&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#s=t,this.#e?.(),this.#e=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#t!==t&&(this.#t=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},st=new Rs,As=class extends ue{#t=!0;#e;#s;constructor(){super(),this.#s=t=>{if(!ae&&window.addEventListener){const e=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#s=t,this.#e?.(),this.#e=t(this.setOnline.bind(this))}setOnline(t){this.#t!==t&&(this.#t=t,this.listeners.forEach(s=>{s(t)}))}isOnline(){return this.#t}},Ie=new As;function Be(){let t,e;const s=new Promise((i,r)=>{t=i,e=r});s.status="pending",s.catch(()=>{});function n(i){Object.assign(s,i),delete s.resolve,delete s.reject}return s.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},s.reject=i=>{n({status:"rejected",reason:i}),e(i)},s}function Es(t){let e;if(t.then(s=>(e=s,s),F)?.catch(F),e!==void 0)return{data:e}}function Ts(t){return Math.min(1e3*2**t,3e4)}function Ft(t){return(t??"online")==="online"?Ie.isOnline():!0}var Dt=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Le(t){return t instanceof Dt}function Lt(t){let e=!1,s=0,n=!1,i;const r=Be(),a=d=>{n||(f(new Dt(d)),t.abort?.())},o=()=>{e=!0},c=()=>{e=!1},u=()=>st.isFocused()&&(t.networkMode==="always"||Ie.isOnline())&&t.canRun(),l=()=>Ft(t.networkMode)&&t.canRun(),h=d=>{n||(n=!0,t.onSuccess?.(d),i?.(),r.resolve(d))},f=d=>{n||(n=!0,t.onError?.(d),i?.(),r.reject(d))},g=()=>new Promise(d=>{i=S=>{(n||u())&&d(S)},t.onPause?.()}).then(()=>{i=void 0,n||t.onContinue?.()}),y=()=>{if(n)return;let d;const S=s===0?t.initialPromise:void 0;try{d=S??t.fn()}catch(b){d=Promise.reject(b)}Promise.resolve(d).then(h).catch(b=>{if(n)return;const m=t.retry??(ae?0:3),w=t.retryDelay??Ts,p=typeof w=="function"?w(s,b):w,v=m===!0||typeof m=="number"&&s<m||typeof m=="function"&&m(s,b);if(e||!v){f(b);return}s++,t.onFail?.(s,b),Os(p).then(()=>u()?void 0:g()).then(()=>{e?f(b):y()})})};return{promise:r,cancel:a,continue:()=>(i?.(),r),cancelRetry:o,continueRetry:c,canStart:l,start:()=>(l()?y():g().then(y),r)}}var Is=t=>setTimeout(t,0);function qs(){let t=[],e=0,s=o=>{o()},n=o=>{o()},i=Is;const r=o=>{e?t.push(o):i(()=>{s(o)})},a=()=>{const o=t;t=[],o.length&&i(()=>{n(()=>{o.forEach(c=>{s(c)})})})};return{batch:o=>{let c;e++;try{c=o()}finally{e--,e||a()}return c},batchCalls:o=>(...c)=>{r(()=>{o(...c)})},schedule:r,setNotifyFunction:o=>{s=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{i=o}}}var T=qs(),xt=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),_e(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ae?1/0:300*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},js=class extends xt{#t;#e;#s;#n;#i;#o;#a;constructor(t){super(),this.#a=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.client,this.#s=this.#n.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#t=ks(this.options),this.state=t.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(t){this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(t,e){const s=$e(this.state.data,t,this.options);return this.#r({data:s,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),s}setState(t,e){this.#r({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#i?.promise;return this.#i?.cancel(t),e?e.then(F).catch(F):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(t=>U(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===tt||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>J(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!It(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#i&&(this.#a?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(u=>u.options.queryFn);c&&this.setOptions(c.options)}const s=new AbortController,n=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#a=!0,s.signal)})},i=()=>{const c=jt(this.options,e),l=(()=>{const h={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(h),h})();return this.#a=!1,this.options.persister?this.options.persister(c,l,this):c(l)},a=(()=>{const c={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:i};return n(c),c})();this.options.behavior?.onFetch(a,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#r({type:"fetch",meta:a.fetchOptions?.meta});const o=c=>{Le(c)&&c.silent||this.#r({type:"error",error:c}),Le(c)||(this.#s.config.onError?.(c,this),this.#s.config.onSettled?.(this.state.data,c,this)),this.scheduleGc()};return this.#i=Lt({initialPromise:e?.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:c=>{if(c===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(u){o(u);return}this.#s.config.onSuccess?.(c,this),this.#s.config.onSettled?.(c,this.state.error,this),this.scheduleGc()},onError:o,onFail:(c,u)=>{this.#r({type:"failed",failureCount:c,error:u})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}),this.#i.start()}#r(t){const e=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Ut(s.data,this.options),fetchMeta:t.meta??null};case"success":return this.#e=void 0,{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return Le(n)&&n.revert&&this.#e?{...this.#e,fetchStatus:"idle"}:{...s,error:n,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=e(this.state),T.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:t})})}};function Ut(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ft(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function ks(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,n=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Fs=class extends ue{constructor(t={}){super(),this.config=t,this.#t=new Map}#t;build(t,e,s){const n=e.queryKey,i=e.queryHash??et(n,e);let r=this.get(i);return r||(r=new js({client:t,queryKey:n,queryHash:i,options:t.defaultQueryOptions(e),state:s,defaultOptions:t.getQueryDefaults(n)}),this.add(r)),r}add(t){this.#t.has(t.queryHash)||(this.#t.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#t.get(t.queryHash);e&&(t.destroy(),e===t&&this.#t.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){T.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#t.get(t)}getAll(){return[...this.#t.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(s=>ut(e,s))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(s=>ut(t,s)):e}notify(t){T.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){T.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){T.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ds=class extends xt{#t;#e;#s;constructor(t){super(),this.mutationId=t.mutationId,this.#e=t.mutationCache,this.#t=[],this.state=t.state||Mt(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#n({type:"continue"})};this.#s=Lt({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(i,r)=>{this.#n({type:"failed",failureCount:i,error:r})},onPause:()=>{this.#n({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const s=this.state.status==="pending",n=!this.#s.canStart();try{if(s)e();else{this.#n({type:"pending",variables:t,isPaused:n}),await this.#e.config.onMutate?.(t,this);const r=await this.options.onMutate?.(t);r!==this.state.context&&this.#n({type:"pending",context:r,variables:t,isPaused:n})}const i=await this.#s.start();return await this.#e.config.onSuccess?.(i,t,this.state.context,this),await this.options.onSuccess?.(i,t,this.state.context),await this.#e.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,t,this.state.context),this.#n({type:"success",data:i}),i}catch(i){try{throw await this.#e.config.onError?.(i,t,this.state.context,this),await this.options.onError?.(i,t,this.state.context),await this.#e.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,t,this.state.context),i}finally{this.#n({type:"error",error:i})}}finally{this.#e.runNext(this)}}#n(t){const e=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),T.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(t)}),this.#e.notify({mutation:this,type:"updated",action:t})})}};function Mt(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ls=class extends ue{constructor(t={}){super(),this.config=t,this.#t=new Set,this.#e=new Map,this.#s=0}#t;#e;#s;build(t,e,s){const n=new Ds({mutationCache:this,mutationId:++this.#s,options:t.defaultMutationOptions(e),state:s});return this.add(n),n}add(t){this.#t.add(t);const e=be(t);if(typeof e=="string"){const s=this.#e.get(e);s?s.push(t):this.#e.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#t.delete(t)){const e=be(t);if(typeof e=="string"){const s=this.#e.get(e);if(s)if(s.length>1){const n=s.indexOf(t);n!==-1&&s.splice(n,1)}else s[0]===t&&this.#e.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=be(t);if(typeof e=="string"){const n=this.#e.get(e)?.find(i=>i.state.status==="pending");return!n||n===t}else return!0}runNext(t){const e=be(t);return typeof e=="string"?this.#e.get(e)?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){T.batch(()=>{this.#t.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(t){const e={exact:!0,...t};return this.getAll().find(s=>lt(e,s))}findAll(t={}){return this.getAll().filter(e=>lt(t,e))}notify(t){T.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return T.batch(()=>Promise.all(t.map(e=>e.continue().catch(F))))}};function be(t){return t.options.scope?.id}function ft(t){return{onFetch:(e,s)=>{const n=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,r=e.state.data?.pages||[],a=e.state.data?.pageParams||[];let o={pages:[],pageParams:[]},c=0;const u=async()=>{let l=!1;const h=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(e.signal.aborted?l=!0:e.signal.addEventListener("abort",()=>{l=!0}),e.signal)})},f=jt(e.options,e.fetchOptions),g=async(y,d,S)=>{if(l)return Promise.reject();if(d==null&&y.pages.length)return Promise.resolve(y);const m=(()=>{const A={client:e.client,queryKey:e.queryKey,pageParam:d,direction:S?"backward":"forward",meta:e.options.meta};return h(A),A})(),w=await f(m),{maxPages:p}=e.options,v=S?Ps:Cs;return{pages:v(y.pages,w,p),pageParams:v(y.pageParams,d,p)}};if(i&&r.length){const y=i==="backward",d=y?xs:pt,S={pages:r,pageParams:a},b=d(n,S);o=await g(S,b,y)}else{const y=t??r.length;do{const d=c===0?a[0]??n.initialPageParam:pt(n,o);if(c>0&&d==null)break;o=await g(o,d),c++}while(c<y)}return o};e.options.persister?e.fetchFn=()=>e.options.persister?.(u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s):e.fetchFn=u}}}function pt(t,{pages:e,pageParams:s}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,s[n],s):void 0}function xs(t,{pages:e,pageParams:s}){return e.length>0?t.getPreviousPageParam?.(e[0],e,s[0],s):void 0}var Us=class{#t;#e;#s;#n;#i;#o;#a;#r;constructor(e={}){this.#t=e.queryCache||new Fs,this.#e=e.mutationCache||new Ls,this.#s=e.defaultOptions||{},this.#n=new Map,this.#i=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=st.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#r=Ie.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#r?.(),this.#r=void 0)}isFetching(e){return this.#t.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#e.findAll({...e,status:"pending"}).length}getQueryData(e){const s=this.defaultQueryOptions({queryKey:e});return this.#t.get(s.queryHash)?.state.data}ensureQueryData(e){const s=this.defaultQueryOptions(e),n=this.#t.build(this,s),i=n.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(J(s.staleTime,n))&&this.prefetchQuery(s),Promise.resolve(i))}getQueriesData(e){return this.#t.findAll(e).map(({queryKey:s,state:n})=>{const i=n.data;return[s,i]})}setQueryData(e,s,n){const i=this.defaultQueryOptions({queryKey:e}),a=this.#t.get(i.queryHash)?.state.data,o=Ss(s,a);if(o!==void 0)return this.#t.build(this,i).setData(o,{...n,manual:!0})}setQueriesData(e,s,n){return T.batch(()=>this.#t.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,s,n)]))}getQueryState(e){const s=this.defaultQueryOptions({queryKey:e});return this.#t.get(s.queryHash)?.state}removeQueries(e){const s=this.#t;T.batch(()=>{s.findAll(e).forEach(n=>{s.remove(n)})})}resetQueries(e,s){const n=this.#t;return T.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},s)))}cancelQueries(e,s={}){const n={revert:!0,...s},i=T.batch(()=>this.#t.findAll(e).map(r=>r.cancel(n)));return Promise.all(i).then(F).catch(F)}invalidateQueries(e,s={}){return T.batch(()=>(this.#t.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},s)))}refetchQueries(e,s={}){const n={...s,cancelRefetch:s.cancelRefetch??!0},i=T.batch(()=>this.#t.findAll(e).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let a=r.fetch(void 0,n);return n.throwOnError||(a=a.catch(F)),r.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(i).then(F)}fetchQuery(e){const s=this.defaultQueryOptions(e);s.retry===void 0&&(s.retry=!1);const n=this.#t.build(this,s);return n.isStaleByTime(J(s.staleTime,n))?n.fetch(s):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(F).catch(F)}fetchInfiniteQuery(e){return e.behavior=ft(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(F).catch(F)}ensureInfiniteQueryData(e){return e.behavior=ft(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ie.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,s){this.#n.set(Z(e),{queryKey:e,defaultOptions:s})}getQueryDefaults(e){const s=[...this.#n.values()],n={};return s.forEach(i=>{fe(e,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(e,s){this.#i.set(Z(e),{mutationKey:e,defaultOptions:s})}getMutationDefaults(e){const s=[...this.#i.values()],n={};return s.forEach(i=>{fe(e,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const s={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return s.queryHash||(s.queryHash=et(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===tt&&(s.enabled=!1),s}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},Ms=class extends ue{constructor(t,e){super(),this.options=e,this.#t=t,this.#r=null,this.#a=Be(),this.options.experimental_prefetchInRender||this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#t;#e=void 0;#s=void 0;#n=void 0;#i;#o;#a;#r;#y;#d;#f;#u;#l;#c;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),yt(this.#e,this.options)?this.#h():this.updateResult(),this.#w())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return He(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return He(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#S(),this.#e.removeObserver(this)}setOptions(t){const e=this.options,s=this.#e;if(this.options=this.#t.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof U(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#O(),this.#e.setOptions(this.options),e._defaulted&&!Te(this.options,e)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const n=this.hasListeners();n&&gt(this.#e,s,this.options,e)&&this.#h(),this.updateResult(),n&&(this.#e!==s||U(this.options.enabled,this.#e)!==U(e.enabled,this.#e)||J(this.options.staleTime,this.#e)!==J(e.staleTime,this.#e))&&this.#g();const i=this.#b();n&&(this.#e!==s||U(this.options.enabled,this.#e)!==U(e.enabled,this.#e)||i!==this.#c)&&this.#m(i)}getOptimisticResult(t){const e=this.#t.getQueryCache().build(this.#t,t),s=this.createResult(e,t);return Ns(this,s)&&(this.#n=s,this.#o=this.options,this.#i=this.#e.state),s}getCurrentResult(){return this.#n}trackResult(t,e){return new Proxy(t,{get:(s,n)=>(this.trackProp(n),e?.(n),Reflect.get(s,n))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#e}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#t.defaultQueryOptions(t),s=this.#t.getQueryCache().build(this.#t,e);return s.fetch().then(()=>this.createResult(s,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#h(t){this.#O();let e=this.#e.fetch(this.options,t);return t?.throwOnError||(e=e.catch(F)),e}#g(){this.#v();const t=J(this.options.staleTime,this.#e);if(ae||this.#n.isStale||!_e(t))return;const s=It(this.#n.dataUpdatedAt,t)+1;this.#u=setTimeout(()=>{this.#n.isStale||this.updateResult()},s)}#b(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#m(t){this.#S(),this.#c=t,!(ae||U(this.options.enabled,this.#e)===!1||!_e(this.#c)||this.#c===0)&&(this.#l=setInterval(()=>{(this.options.refetchIntervalInBackground||st.isFocused())&&this.#h()},this.#c))}#w(){this.#g(),this.#m(this.#b())}#v(){this.#u&&(clearTimeout(this.#u),this.#u=void 0)}#S(){this.#l&&(clearInterval(this.#l),this.#l=void 0)}createResult(t,e){const s=this.#e,n=this.options,i=this.#n,r=this.#i,a=this.#o,c=t!==s?t.state:this.#s,{state:u}=t;let l={...u},h=!1,f;if(e._optimisticResults){const q=this.hasListeners(),R=!q&&yt(t,e),C=q&&gt(t,s,e,n);(R||C)&&(l={...l,...Ut(u.data,t.options)}),e._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:g,errorUpdatedAt:y,status:d}=l;f=l.data;let S=!1;if(e.placeholderData!==void 0&&f===void 0&&d==="pending"){let q;i?.isPlaceholderData&&e.placeholderData===a?.placeholderData?(q=i.data,S=!0):q=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,q!==void 0&&(d="success",f=$e(i?.data,q,e),h=!0)}if(e.select&&f!==void 0&&!S)if(i&&f===r?.data&&e.select===this.#y)f=this.#d;else try{this.#y=e.select,f=e.select(f),f=$e(i?.data,f,e),this.#d=f,this.#r=null}catch(q){this.#r=q}this.#r&&(g=this.#r,f=this.#d,y=Date.now(),d="error");const b=l.fetchStatus==="fetching",m=d==="pending",w=d==="error",p=m&&b,v=f!==void 0,E={status:d,fetchStatus:l.fetchStatus,isPending:m,isSuccess:d==="success",isError:w,isInitialLoading:p,isLoading:p,data:f,dataUpdatedAt:l.dataUpdatedAt,error:g,errorUpdatedAt:y,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>c.dataUpdateCount||l.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!m,isLoadingError:w&&!v,isPaused:l.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:w&&v,isStale:nt(t,e),refetch:this.refetch,promise:this.#a,isEnabled:U(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const q=j=>{E.status==="error"?j.reject(E.error):E.data!==void 0&&j.resolve(E.data)},R=()=>{const j=this.#a=E.promise=Be();q(j)},C=this.#a;switch(C.status){case"pending":t.queryHash===s.queryHash&&q(C);break;case"fulfilled":(E.status==="error"||E.data!==C.value)&&R();break;case"rejected":(E.status!=="error"||E.error!==C.reason)&&R();break}}return E}updateResult(){const t=this.#n,e=this.createResult(this.#e,this.options);if(this.#i=this.#e.state,this.#o=this.options,this.#i.data!==void 0&&(this.#f=this.#e),Te(e,t))return;this.#n=e;const s=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!this.#p.size)return!0;const r=new Set(i??this.#p);return this.options.throwOnError&&r.add("error"),Object.keys(this.#n).some(a=>{const o=a;return this.#n[o]!==t[o]&&r.has(o)})};this.#C({listeners:s()})}#O(){const t=this.#t.getQueryCache().build(this.#t,this.options);if(t===this.#e)return;const e=this.#e;this.#e=t,this.#s=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#w()}#C(t){T.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#n)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function Qs(t,e){return U(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function yt(t,e){return Qs(t,e)||t.state.data!==void 0&&He(t,e,e.refetchOnMount)}function He(t,e,s){if(U(e.enabled,t)!==!1&&J(e.staleTime,t)!=="static"){const n=typeof s=="function"?s(t):s;return n==="always"||n!==!1&&nt(t,e)}return!1}function gt(t,e,s,n){return(t!==e||U(n.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&nt(t,s)}function nt(t,e){return U(e.enabled,t)!==!1&&t.isStaleByTime(J(e.staleTime,t))}function Ns(t,e){return!Te(t.getCurrentResult(),e)}var _s=class extends ue{#t;#e=void 0;#s;#n;constructor(e,s){super(),this.#t=e,this.setOptions(s),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const s=this.options;this.options=this.#t.defaultMutationOptions(e),Te(this.options,s)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),s?.mutationKey&&this.options.mutationKey&&Z(s.mutationKey)!==Z(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#o(e)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#i(),this.#o()}mutate(e,s){return this.#n=s,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(e)}#i(){const e=this.#s?.state??Mt();this.#e={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#o(e){T.batch(()=>{if(this.#n&&this.hasListeners()){const s=this.#e.variables,n=this.#e.context;e?.type==="success"?(this.#n.onSuccess?.(e.data,s,n),this.#n.onSettled?.(e.data,null,s,n)):e?.type==="error"&&(this.#n.onError?.(e.error,s,n),this.#n.onSettled?.(void 0,e.error,s,n))}this.listeners.forEach(s=>{s(this.#e)})})}};function Ks(t){return t}function $s(t,e,s){if(typeof e!="object"||e===null)return;const n=t.getMutationCache(),i=t.getQueryCache(),r=t.getDefaultOptions().hydrate?.deserializeData??Ks,a=e.mutations||[],o=e.queries||[];a.forEach(({state:c,...u})=>{n.build(t,{...t.getDefaultOptions().hydrate?.mutations,...s?.defaultOptions?.mutations,...u},c)}),o.forEach(({queryKey:c,state:u,queryHash:l,meta:h,promise:f,dehydratedAt:g})=>{const y=f?Es(f):void 0,d=u.data===void 0?y?.data:u.data,S=d===void 0?d:r(d);let b=i.get(l);const m=b?.state.status==="pending",w=b?.state.fetchStatus==="fetching";if(b){const p=y&&g!==void 0&&g>b.state.dataUpdatedAt;if(u.dataUpdatedAt>b.state.dataUpdatedAt||p){const{fetchStatus:v,...A}=u;b.setState({...A,data:S})}}else b=i.build(t,{...t.getDefaultOptions().hydrate?.queries,...s?.defaultOptions?.queries,queryKey:c,queryHash:l,meta:h},{...u,data:S,fetchStatus:"idle",status:S!==void 0?"success":u.status});f&&!m&&!w&&(g===void 0||g>b.state.dataUpdatedAt)&&b.fetch(void 0,{initialPromise:Promise.resolve(f).then(r)})})}const We=Symbol("store-raw"),ie=Symbol("store-node"),$=Symbol("store-has"),Qt=Symbol("store-self");function Nt(t){let e=t[X];if(!e&&(Object.defineProperty(t,X,{value:e=new Proxy(t,Ws)}),!Array.isArray(t))){const s=Object.keys(t),n=Object.getOwnPropertyDescriptors(t);for(let i=0,r=s.length;i<r;i++){const a=s[i];n[a].get&&Object.defineProperty(t,a,{enumerable:n[a].enumerable,get:n[a].get.bind(e)})}}return e}function Y(t){let e;return t!=null&&typeof t=="object"&&(t[X]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function ee(t,e=new Set){let s,n,i,r;if(s=t!=null&&t[We])return s;if(!Y(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let a=0,o=t.length;a<o;a++)i=t[a],(n=ee(i,e))!==i&&(t[a]=n)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const a=Object.keys(t),o=Object.getOwnPropertyDescriptors(t);for(let c=0,u=a.length;c<u;c++)r=a[c],!o[r].get&&(i=t[r],(n=ee(i,e))!==i&&(t[r]=n))}return t}function qe(t,e){let s=t[e];return s||Object.defineProperty(t,e,{value:s=Object.create(null)}),s}function pe(t,e,s){if(t[e])return t[e];const[n,i]=N(s,{equals:!1,internal:!0});return n.$=i,t[e]=n}function Bs(t,e){const s=Reflect.getOwnPropertyDescriptor(t,e);return!s||s.get||!s.configurable||e===X||e===ie||(delete s.value,delete s.writable,s.get=()=>t[X][e]),s}function _t(t){Me()&&pe(qe(t,ie),Qt)()}function Hs(t){return _t(t),Reflect.ownKeys(t)}const Ws={get(t,e,s){if(e===We)return t;if(e===X)return s;if(e===Ue)return _t(t),s;const n=qe(t,ie),i=n[e];let r=i?i():t[e];if(e===ie||e===$||e==="__proto__")return r;if(!i){const a=Object.getOwnPropertyDescriptor(t,e);Me()&&(typeof r!="function"||t.hasOwnProperty(e))&&!(a&&a.get)&&(r=pe(n,e,r)())}return Y(r)?Nt(r):r},has(t,e){return e===We||e===X||e===Ue||e===ie||e===$||e==="__proto__"?!0:(Me()&&pe(qe(t,$),e)(),e in t)},set(){return!0},deleteProperty(){return!0},ownKeys:Hs,getOwnPropertyDescriptor:Bs};function x(t,e,s,n=!1){if(!n&&t[e]===s)return;const i=t[e],r=t.length;s===void 0?(delete t[e],t[$]&&t[$][e]&&i!==void 0&&t[$][e].$()):(t[e]=s,t[$]&&t[$][e]&&i===void 0&&t[$][e].$());let a=qe(t,ie),o;if((o=pe(a,e,i))&&o.$(()=>s),Array.isArray(t)&&t.length!==r){for(let c=t.length;c<r;c++)(o=a[c])&&o.$();(o=pe(a,"length",r))&&o.$(t.length)}(o=a[Qt])&&o.$()}function Kt(t,e){const s=Object.keys(e);for(let n=0;n<s.length;n+=1){const i=s[n];x(t,i,e[i])}}function Gs(t,e){if(typeof e=="function"&&(e=e(t)),e=ee(e),Array.isArray(e)){if(t===e)return;let s=0,n=e.length;for(;s<n;s++){const i=e[s];t[s]!==i&&x(t,s,i)}x(t,"length",n)}else Kt(t,e)}function he(t,e,s=[]){let n,i=t;if(e.length>1){n=e.shift();const a=typeof n,o=Array.isArray(t);if(Array.isArray(n)){for(let c=0;c<n.length;c++)he(t,[n[c]].concat(e),s);return}else if(o&&a==="function"){for(let c=0;c<t.length;c++)n(t[c],c)&&he(t,[c].concat(e),s);return}else if(o&&a==="object"){const{from:c=0,to:u=t.length-1,by:l=1}=n;for(let h=c;h<=u;h+=l)he(t,[h].concat(e),s);return}else if(e.length>1){he(t[n],e,[n].concat(s));return}i=t[n],s=[n].concat(s)}let r=e[0];typeof r=="function"&&(r=r(i,s),r===i)||n===void 0&&r==null||(r=ee(r),n===void 0||Y(i)&&Y(r)&&!Array.isArray(r)?Kt(i,r):x(t,n,r))}function $t(...[t,e]){const s=ee(t||{}),n=Array.isArray(s),i=Nt(s);function r(...a){rs(()=>{n&&a.length===1?Gs(s,a[0]):he(s,a)})}return[i,r]}const Ge=Symbol("store-root");function se(t,e,s,n,i){const r=e[s];if(t===r)return;const a=Array.isArray(t);if(s!==Ge&&(!Y(t)||!Y(r)||a!==Array.isArray(r)||i&&t[i]!==r[i])){x(e,s,t);return}if(a){if(t.length&&r.length&&(!n||i&&t[0]&&t[0][i]!=null)){let u,l,h,f,g,y,d,S;for(h=0,f=Math.min(r.length,t.length);h<f&&(r[h]===t[h]||i&&r[h]&&t[h]&&r[h][i]&&r[h][i]===t[h][i]);h++)se(t[h],r,h,n,i);const b=new Array(t.length),m=new Map;for(f=r.length-1,g=t.length-1;f>=h&&g>=h&&(r[f]===t[g]||i&&r[f]&&t[g]&&r[f][i]&&r[f][i]===t[g][i]);f--,g--)b[g]=r[f];if(h>g||h>f){for(l=h;l<=g;l++)x(r,l,t[l]);for(;l<t.length;l++)x(r,l,b[l]),se(t[l],r,l,n,i);r.length>t.length&&x(r,"length",t.length);return}for(d=new Array(g+1),l=g;l>=h;l--)y=t[l],S=i&&y?y[i]:y,u=m.get(S),d[l]=u===void 0?-1:u,m.set(S,l);for(u=h;u<=f;u++)y=r[u],S=i&&y?y[i]:y,l=m.get(S),l!==void 0&&l!==-1&&(b[l]=r[u],l=d[l],m.set(S,l));for(l=h;l<t.length;l++)l in b?(x(r,l,b[l]),se(t[l],r,l,n,i)):x(r,l,t[l])}else for(let u=0,l=t.length;u<l;u++)se(t[u],r,u,n,i);r.length>t.length&&x(r,"length",t.length);return}const o=Object.keys(t);for(let u=0,l=o.length;u<l;u++)se(t[o[u]],r,o[u],n,i);const c=Object.keys(r);for(let u=0,l=c.length;u<l;u++)t[c[u]]===void 0&&x(r,c[u],void 0)}function zs(t,e={}){const{merge:s,key:n="id"}=e,i=ee(t);return r=>{if(!Y(r)||!Y(i))return i;const a=se(i,{[Ge]:r},Ge,s,n);return a===void 0?r:a}}var Bt=Ye(void 0),ge=t=>{if(t)return t;const e=Xe(Bt);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e()},Ht=t=>(oe(e=>(e?.(),t.client.mount(),t.client.unmount.bind(t.client))),ye(()=>t.client.unmount()),D(Bt.Provider,{value:()=>t.client,get children(){return t.children}})),Vs=Ye(()=>!1),Js=()=>Xe(Vs);function Ys(t,e,s,n){if(s===!1)return e;if(typeof s=="function"){const a=s(t.data,e.data);return{...e,data:a}}let i=e.data;if(t.data===void 0)try{i=structuredClone(i)}catch{}const r=zs(i,{key:s})(t.data);return{...e,data:r}}var Xs=(t,e)=>e;function Zs(t,e,s){const n=M(()=>ge(s?.())),i=Js(),r=M(()=>{const p=n().defaultQueryOptions(t());return p._optimisticResults=i()?"isRestoring":"optimistic",p.structuralSharing=!1,p}),a=r(),[o,c]=N(new e(n(),r()));let u=o().getOptimisticResult(r());const[l,h]=$t(u),f=()=>o().subscribe(v=>{u=v,queueMicrotask(()=>{d&&m()})});function g(p){const v=o().options,A=v.reconcile;h(E=>Ys(E,p,A===void 0?!1:A,v.queryHash))}function y(){return[()=>l,p=>{const v=ee(l);if(typeof p=="function"&&(p=p(v)),p?.hydrationData){const{hydrationData:A,...E}=p;p=E}g(p)}]}let d=null,S=null;const[b,{refetch:m}]=is(()=>{const p=o();return new Promise((v,A)=>{if(S=v,!d&&!i()&&(d=f()),p.updateResult(),u.isError&&!u.isFetching&&!i()&&kt(p.options.throwOnError,[u.error,p.getCurrentQuery()]))return g(u),A(u.error);if(!u.isLoading)return S=null,v(Xs(p.getCurrentQuery(),u));g(u)})},{storage:y,get deferStream(){return t().deferStream},onHydrated(p,v){if(v.value&&"hydrationData"in v.value&&$s(n(),{queries:[{...v.value.hydrationData}]}),d)return;const A={...a};(a.staleTime||!a.initialData)&&v.value&&(A.refetchOnMount=!1),o().setOptions(A),g(o().getOptimisticResult(A)),d=f()}});ne(ve(n,p=>{d&&d();const v=new e(p,r());d=f(),c(v)},{defer:!0})),ne(ve(i,p=>{p||m()},{defer:!0})),ye(()=>{d&&(d(),d=null),S&&(S(u),S=null)}),ne(ve([o,r],([p,v])=>{p.setOptions(v),g(p.getOptimisticResult(v)),m()},{defer:!0}));const w={get(p,v){return v==="data"?l.data!==void 0?b.latest?.data:b()?.data:Reflect.get(p,v)}};return new Proxy(l,w)}function en(t,e){return Zs(M(()=>t()),Ms,e)}function ze(t,e){const s=M(()=>ge(e?.())),n=new _s(s(),t()),i=(c,u)=>{n.mutate(c,u).catch(F)},[r,a]=$t({...n.getCurrentResult(),mutate:i,mutateAsync:n.getCurrentResult().mutate});ne(()=>{n.setOptions(t())}),ne(ve(()=>r.status,()=>{if(r.isError&&kt(n.options.throwOnError,[r.error]))throw r.error}));const o=n.subscribe(c=>{a({...c,mutate:i,mutateAsync:c.mutate})});return ye(o),r}var tn=class extends Us{constructor(t={}){super(t)}};const Wt=new tn({defaultOptions:{queries:{staleTime:1e3*60*5,refetchOnWindowFocus:!1,retry:3,retryDelay:t=>Math.min(1e3*2**t,3e4)},mutations:{retry:1}}});class L extends Error{constructor(e){super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,L.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof L||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=this.response?.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":this.originalError?.cause?.message?.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong."),this.cause=this.originalError}get data(){return this.response}toJSON(){return{...this}}}const me=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function sn(t,e){const s={};if(typeof t!="string")return s;const n=Object.assign({},{}).decode||nn;let i=0;for(;i<t.length;){const r=t.indexOf("=",i);if(r===-1)break;let a=t.indexOf(";",i);if(a===-1)a=t.length;else if(a<r){i=t.lastIndexOf(";",r-1)+1;continue}const o=t.slice(i,r).trim();if(s[o]===void 0){let c=t.slice(r+1,a).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1));try{s[o]=n(c)}catch{s[o]=c}}i=a+1}return s}function bt(t,e,s){const n=Object.assign({},s||{}),i=n.encode||rn;if(!me.test(t))throw new TypeError("argument name is invalid");const r=i(e);if(r&&!me.test(r))throw new TypeError("argument val is invalid");let a=t+"="+r;if(n.maxAge!=null){const o=n.maxAge-0;if(isNaN(o)||!isFinite(o))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(o)}if(n.domain){if(!me.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!me.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if(!function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a}function nn(t){return t.indexOf("%")!==-1?decodeURIComponent(t):t}function rn(t){return encodeURIComponent(t)}const on=typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal;let Gt;function re(t){if(t)try{const e=decodeURIComponent(Gt(t.split(".")[1]).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function zt(t,e=0){let s=re(t);return!(Object.keys(s).length>0&&(!s.exp||s.exp-e>Date.now()/1e3))}Gt=typeof atob!="function"||on?t=>{let e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var s,n,i=0,r=0,a="";n=e.charAt(r++);~n&&(s=i%4?64*s+n:n,i++%4)?a+=String.fromCharCode(255&s>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return a}:atob;const mt="pb_auth";class it{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!zt(this.token)}get isSuperuser(){let e=re(this.token);return e.type=="auth"&&(this.record?.collectionName=="_superusers"||!this.record?.collectionName&&e.collectionId=="pbc_3142635823")}get isAdmin(){return console.warn("Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),this.isSuperuser}get isAuthRecord(){return console.warn("Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),re(this.token).type=="auth"&&!this.isSuperuser}save(e,s){this.baseToken=e||"",this.baseModel=s||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,s=mt){const n=sn(e||"")[s]||"";let i={};try{i=JSON.parse(n),(typeof i===null||typeof i!="object"||Array.isArray(i))&&(i={})}catch{}this.save(i.token||"",i.record||i.model||null)}exportToCookie(e,s=mt){const n={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},i=re(this.token);n.expires=i?.exp?new Date(1e3*i.exp):new Date("1970-01-01"),e=Object.assign({},n,e);const r={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null};let a=bt(s,JSON.stringify(r),e);const o=typeof Blob<"u"?new Blob([a]).size:a.length;if(r.record&&o>4096){r.record={id:r.record?.id,email:r.record?.email};const c=["collectionId","collectionName","verified"];for(const u in this.record)c.includes(u)&&(r.record[u]=this.record[u]);a=bt(s,JSON.stringify(r),e)}return a}onChange(e,s=!1){return this._onChangeCallbacks.push(e),s&&e(this.token,this.record),()=>{for(let n=this._onChangeCallbacks.length-1;n>=0;n--)if(this._onChangeCallbacks[n]==e)return delete this._onChangeCallbacks[n],void this._onChangeCallbacks.splice(n,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.record)}}class an extends it{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get record(){const e=this._storageGet(this.storageKey)||{};return e.record||e.model||null}get model(){return this.record}save(e,s){this._storageSet(this.storageKey,{token:e,record:s}),super.save(e,s)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&window?.localStorage){const s=window.localStorage.getItem(e)||"";try{return JSON.parse(s)}catch{return s}}return this.storageFallback[e]}_storageSet(e,s){if(typeof window<"u"&&window?.localStorage){let n=s;typeof s!="string"&&(n=JSON.stringify(s)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=s}_storageRemove(e){typeof window<"u"&&window?.localStorage&&window.localStorage?.removeItem(e),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&window?.localStorage&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const s=this._storageGet(this.storageKey)||{};super.save(s.token||"",s.record||s.model||null)})}}class z{constructor(e){this.client=e}}class cn extends z{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,s){return s=Object.assign({method:"PATCH",body:e},s),this.client.send("/api/settings",s)}async testS3(e="storage",s){return s=Object.assign({method:"POST",body:{filesystem:e}},s),this.client.send("/api/settings/test/s3",s).then(()=>!0)}async testEmail(e,s,n,i){return i=Object.assign({method:"POST",body:{email:s,template:n,collection:e}},i),this.client.send("/api/settings/test/email",i).then(()=>!0)}async generateAppleClientSecret(e,s,n,i,r,a){return a=Object.assign({method:"POST",body:{clientId:e,teamId:s,keyId:n,privateKey:i,duration:r}},a),this.client.send("/api/settings/apple/generate-client-secret",a)}}const un=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function rt(t){if(t){t.query=t.query||{};for(let e in t)un.includes(e)||(t.query[e]=t[e],delete t[e])}}function Vt(t){const e=[];for(const s in t){const n=encodeURIComponent(s),i=Array.isArray(t[s])?t[s]:[t[s]];for(let r of i)r=ln(r),r!==null&&e.push(n+"="+r)}return e.join("&")}function ln(t){return t==null?null:t instanceof Date?encodeURIComponent(t.toISOString().replace("T"," ")):encodeURIComponent(typeof t=="object"?JSON.stringify(t):t)}class Jt extends z{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,s,n){if(!e)throw new Error("topic must be set.");let i=e;if(n){rt(n=Object.assign({},n));const a="options="+encodeURIComponent(JSON.stringify({query:n.query,headers:n.headers}));i+=(i.includes("?")?"&":"?")+a}const r=function(a){const o=a;let c;try{c=JSON.parse(o?.data)}catch{}s(c||{})};return this.subscriptions[i]||(this.subscriptions[i]=[]),this.subscriptions[i].push(r),this.isConnected?this.subscriptions[i].length===1?await this.submitSubscriptions():this.eventSource?.addEventListener(i,r):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,r)}async unsubscribe(e){let s=!1;if(e){const n=this.getSubscriptionsByTopic(e);for(let i in n)if(this.hasSubscriptionListeners(i)){for(let r of this.subscriptions[i])this.eventSource?.removeEventListener(i,r);delete this.subscriptions[i],s||(s=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?s&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){let s=!1;for(let n in this.subscriptions)if((n+"?").startsWith(e)){s=!0;for(let i of this.subscriptions[n])this.eventSource?.removeEventListener(n,i);delete this.subscriptions[n]}s&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,s){let n=!1;const i=this.getSubscriptionsByTopic(e);for(let r in i){if(!Array.isArray(this.subscriptions[r])||!this.subscriptions[r].length)continue;let a=!1;for(let o=this.subscriptions[r].length-1;o>=0;o--)this.subscriptions[r][o]===s&&(a=!0,delete this.subscriptions[r][o],this.subscriptions[r].splice(o,1),this.eventSource?.removeEventListener(r,s));a&&(this.subscriptions[r].length||delete this.subscriptions[r],n||this.hasSubscriptionListeners(r)||(n=!0))}this.hasSubscriptionListeners()?n&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){if(this.subscriptions=this.subscriptions||{},e)return!!this.subscriptions[e]?.length;for(let s in this.subscriptions)if(this.subscriptions[s]?.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!e?.isAbort)throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const s={};e=e.includes("?")?e:e+"?";for(let n in this.subscriptions)(n+"?").startsWith(e)&&(s[n]=this.subscriptions[n]);return s}getNonEmptySubscriptionKeys(){const e=[];for(let s in this.subscriptions)this.subscriptions[s].length&&e.push(s);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let s of this.subscriptions[e])this.eventSource.addEventListener(e,s)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let s of this.subscriptions[e])this.eventSource.removeEventListener(e,s)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,s)=>{this.pendingConnects.push({resolve:e,reject:s}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const s=e;this.clientId=s?.lastEventId,this.submitSubscriptions().then(async()=>{let n=3;for(;this.hasUnsentSubscriptions()&&n>0;)n--,await this.submitSubscriptions()}).then(()=>{for(let i of this.pendingConnects)i.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const n=this.getSubscriptionsByTopic("PB_CONNECT");for(let i in n)for(let r of n[i])r(e)}).catch(n=>{this.clientId="",this.connectErrorHandler(n)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const s of e)if(!this.lastSentSubscriptions.includes(s))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let n of this.pendingConnects)n.reject(new L(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const s=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},s)}disconnect(e=!1){if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),this.eventSource?.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let s of this.pendingConnects)s.resolve();this.pendingConnects=[]}}}class Yt extends z{decode(e){return e}async getFullList(e,s){if(typeof e=="number")return this._getFullList(e,s);let n=500;return(s=Object.assign({},e,s)).batch&&(n=s.batch,delete s.batch),this._getFullList(n,s)}async getList(e=1,s=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:s},n.query),this.client.send(this.baseCrudPath,n).then(i=>(i.items=i.items?.map(r=>this.decode(r))||[],i))}async getFirstListItem(e,s){return(s=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},s)).query=Object.assign({filter:e,skipTotal:1},s.query),this.getList(1,1,s).then(n=>{if(!n?.items?.length)throw new L({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return n.items[0]})}async getOne(e,s){if(!e)throw new L({url:this.client.buildURL(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return s=Object.assign({method:"GET"},s),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),s).then(n=>this.decode(n))}async create(e,s){return s=Object.assign({method:"POST",body:e},s),this.client.send(this.baseCrudPath,s).then(n=>this.decode(n))}async update(e,s,n){return n=Object.assign({method:"PATCH",body:s},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(i=>this.decode(i))}async delete(e,s){return s=Object.assign({method:"DELETE"},s),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),s).then(()=>!0)}_getFullList(e=500,s){(s=s||{}).query=Object.assign({skipTotal:1},s.query);let n=[],i=async r=>this.getList(r,e||500,s).then(a=>{const o=a.items;return n=n.concat(o),o.length==a.perPage?i(r+1):n});return i(1)}}function V(t,e,s,n){const i=n!==void 0;return i||s!==void 0?i?(console.warn(t),e.body=Object.assign({},e.body,s),e.query=Object.assign({},e.query,n),e):Object.assign(e,s):e}function xe(t){t._resetAutoRefresh?.()}class hn extends Yt{constructor(e,s){super(e),this.collectionIdOrName=s}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return this.collectionIdOrName=="_superusers"||this.collectionIdOrName=="_pbc_2773867675"}async subscribe(e,s,n){if(!e)throw new Error("Missing topic.");if(!s)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,s,n)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,s){if(typeof e=="number")return super.getFullList(e,s);const n=Object.assign({},e,s);return super.getFullList(n)}async getList(e=1,s=30,n){return super.getList(e,s,n)}async getFirstListItem(e,s){return super.getFirstListItem(e,s)}async getOne(e,s){return super.getOne(e,s)}async create(e,s){return super.create(e,s)}async update(e,s,n){return super.update(e,s,n).then(i=>{if(this.client.authStore.record?.id===i?.id&&(this.client.authStore.record?.collectionId===this.collectionIdOrName||this.client.authStore.record?.collectionName===this.collectionIdOrName)){let r=Object.assign({},this.client.authStore.record.expand),a=Object.assign({},this.client.authStore.record,i);r&&(a.expand=Object.assign(r,i.expand)),this.client.authStore.save(this.client.authStore.token,a)}return i})}async delete(e,s){return super.delete(e,s).then(n=>(!n||this.client.authStore.record?.id!==e||this.client.authStore.record?.collectionId!==this.collectionIdOrName&&this.client.authStore.record?.collectionName!==this.collectionIdOrName||this.client.authStore.clear(),n))}authResponse(e){const s=this.decode(e?.record||{});return this.client.authStore.save(e?.token,s),Object.assign({},e,{token:e?.token||"",record:s})}async listAuthMethods(e){return e=Object.assign({method:"GET",fields:"mfa,otp,password,oauth2"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e)}async authWithPassword(e,s,n){let i;n=Object.assign({method:"POST",body:{identity:e,password:s}},n),this.isSuperusers&&(i=n.autoRefreshThreshold,delete n.autoRefreshThreshold,n.autoRefresh||xe(this.client));let r=await this.client.send(this.baseCollectionPath+"/auth-with-password",n);return r=this.authResponse(r),i&&this.isSuperusers&&function(o,c,u,l){xe(o);const h=o.beforeSend,f=o.authStore.record,g=o.authStore.onChange((y,d)=>{(!y||d?.id!=f?.id||(d?.collectionId||f?.collectionId)&&d?.collectionId!=f?.collectionId)&&xe(o)});o._resetAutoRefresh=function(){g(),o.beforeSend=h,delete o._resetAutoRefresh},o.beforeSend=async(y,d)=>{const S=o.authStore.token;if(d.query?.autoRefresh)return h?h(y,d):{url:y,sendOptions:d};let b=o.authStore.isValid;if(b&&zt(o.authStore.token,c))try{await u()}catch{b=!1}b||await l();const m=d.headers||{};for(let w in m)if(w.toLowerCase()=="authorization"&&S==m[w]&&o.authStore.token){m[w]=o.authStore.token;break}return d.headers=m,h?h(y,d):{url:y,sendOptions:d}}}(this.client,i,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,s,Object.assign({autoRefresh:!0},n))),r}async authWithOAuth2Code(e,s,n,i,r,a,o){let c={method:"POST",body:{provider:e,code:s,codeVerifier:n,redirectURL:i,createData:r}};return c=V("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).",c,a,o),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",c).then(u=>this.authResponse(u))}authWithOAuth2(...e){if(e.length>1||typeof e?.[0]=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code(e?.[0]||"",e?.[1]||"",e?.[2]||"",e?.[3]||"",e?.[4]||{},e?.[5]||{},e?.[6]||{});const s=e?.[0]||{};let n=null;s.urlCallback||(n=wt(void 0));const i=new Jt(this.client);function r(){n?.close(),i.unsubscribe()}const a={},o=s.requestKey;return o&&(a.requestKey=o),this.listAuthMethods(a).then(c=>{const u=c.oauth2.providers.find(f=>f.name===s.provider);if(!u)throw new L(new Error(`Missing or invalid provider "${s.provider}".`));const l=this.client.buildURL("/api/oauth2-redirect"),h=o?this.client.cancelControllers?.[o]:void 0;return h&&(h.signal.onabort=()=>{r()}),new Promise(async(f,g)=>{try{await i.subscribe("@oauth2",async b=>{const m=i.clientId;try{if(!b.state||m!==b.state)throw new Error("State parameters don't match.");if(b.error||!b.code)throw new Error("OAuth2 redirect error or missing code: "+b.error);const w=Object.assign({},s);delete w.provider,delete w.scopes,delete w.createData,delete w.urlCallback,h?.signal?.onabort&&(h.signal.onabort=null);const p=await this.authWithOAuth2Code(u.name,b.code,u.codeVerifier,l,s.createData,w);f(p)}catch(w){g(new L(w))}r()});const y={state:i.clientId};s.scopes?.length&&(y.scope=s.scopes.join(" "));const d=this._replaceQueryParams(u.authURL+l,y);await(s.urlCallback||function(b){n?n.location.href=b:n=wt(b)})(d)}catch(y){r(),g(new L(y))}})}).catch(c=>{throw r(),c})}async authRefresh(e,s){let n={method:"POST"};return n=V("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,s),this.client.send(this.baseCollectionPath+"/auth-refresh",n).then(i=>this.authResponse(i))}async requestPasswordReset(e,s,n){let i={method:"POST",body:{email:e}};return i=V("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,s,n),this.client.send(this.baseCollectionPath+"/request-password-reset",i).then(()=>!0)}async confirmPasswordReset(e,s,n,i,r){let a={method:"POST",body:{token:e,password:s,passwordConfirm:n}};return a=V("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",a,i,r),this.client.send(this.baseCollectionPath+"/confirm-password-reset",a).then(()=>!0)}async requestVerification(e,s,n){let i={method:"POST",body:{email:e}};return i=V("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",i,s,n),this.client.send(this.baseCollectionPath+"/request-verification",i).then(()=>!0)}async confirmVerification(e,s,n){let i={method:"POST",body:{token:e}};return i=V("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",i,s,n),this.client.send(this.baseCollectionPath+"/confirm-verification",i).then(()=>{const r=re(e),a=this.client.authStore.record;return a&&!a.verified&&a.id===r.id&&a.collectionId===r.collectionId&&(a.verified=!0,this.client.authStore.save(this.client.authStore.token,a)),!0})}async requestEmailChange(e,s,n){let i={method:"POST",body:{newEmail:e}};return i=V("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",i,s,n),this.client.send(this.baseCollectionPath+"/request-email-change",i).then(()=>!0)}async confirmEmailChange(e,s,n,i){let r={method:"POST",body:{token:e,password:s}};return r=V("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",r,n,i),this.client.send(this.baseCollectionPath+"/confirm-email-change",r).then(()=>{const a=re(e),o=this.client.authStore.record;return o&&o.id===a.id&&o.collectionId===a.collectionId&&this.client.authStore.clear(),!0})}async listExternalAuths(e,s){return this.client.collection("_externalAuths").getFullList(Object.assign({},s,{filter:this.client.filter("recordRef = {:id}",{id:e})}))}async unlinkExternalAuth(e,s,n){const i=await this.client.collection("_externalAuths").getFirstListItem(this.client.filter("recordRef = {:recordId} && provider = {:provider}",{recordId:e,provider:s}));return this.client.collection("_externalAuths").delete(i.id,n).then(()=>!0)}async requestOTP(e,s){return s=Object.assign({method:"POST",body:{email:e}},s),this.client.send(this.baseCollectionPath+"/request-otp",s)}async authWithOTP(e,s,n){return n=Object.assign({method:"POST",body:{otpId:e,password:s}},n),this.client.send(this.baseCollectionPath+"/auth-with-otp",n).then(i=>this.authResponse(i))}async impersonate(e,s,n){(n=Object.assign({method:"POST",body:{duration:s}},n)).headers=n.headers||{},n.headers.Authorization||(n.headers.Authorization=this.client.authStore.token);const i=new Xt(this.client.baseURL,new it,this.client.lang),r=await i.send(this.baseCollectionPath+"/impersonate/"+encodeURIComponent(e),n);return i.authStore.save(r?.token,this.decode(r?.record||{})),i}_replaceQueryParams(e,s={}){let n=e,i="";e.indexOf("?")>=0&&(n=e.substring(0,e.indexOf("?")),i=e.substring(e.indexOf("?")+1));const r={},a=i.split("&");for(const o of a){if(o=="")continue;const c=o.split("=");r[decodeURIComponent(c[0].replace(/\+/g," "))]=decodeURIComponent((c[1]||"").replace(/\+/g," "))}for(let o in s)s.hasOwnProperty(o)&&(s[o]==null?delete r[o]:r[o]=s[o]);i="";for(let o in r)r.hasOwnProperty(o)&&(i!=""&&(i+="&"),i+=encodeURIComponent(o.replace(/%20/g,"+"))+"="+encodeURIComponent(r[o].replace(/%20/g,"+")));return i!=""?n+"?"+i:n}}function wt(t){if(typeof window>"u"||!window?.open)throw new L(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,s=768,n=window.innerWidth,i=window.innerHeight;e=e>n?n:e,s=s>i?i:s;let r=n/2-e/2,a=i/2-s/2;return window.open(t,"popup_window","width="+e+",height="+s+",top="+a+",left="+r+",resizable,menubar=no")}class dn extends Yt{get baseCrudPath(){return"/api/collections"}async import(e,s=!1,n){return n=Object.assign({method:"PUT",body:{collections:e,deleteMissing:s}},n),this.client.send(this.baseCrudPath+"/import",n).then(()=>!0)}async getScaffolds(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/meta/scaffolds",e)}async truncate(e,s){return s=Object.assign({method:"DELETE"},s),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/truncate",s).then(()=>!0)}}class fn extends z{async getList(e=1,s=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:s},n.query),this.client.send("/api/logs",n)}async getOne(e,s){if(!e)throw new L({url:this.client.buildURL("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return s=Object.assign({method:"GET"},s),this.client.send("/api/logs/"+encodeURIComponent(e),s)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class pn extends z{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class yn extends z{getUrl(e,s,n={}){return console.warn("Please replace pb.files.getUrl() with pb.files.getURL()"),this.getURL(e,s,n)}getURL(e,s,n={}){if(!s||!e?.id||!e?.collectionId&&!e?.collectionName)return"";const i=[];i.push("api"),i.push("files"),i.push(encodeURIComponent(e.collectionId||e.collectionName)),i.push(encodeURIComponent(e.id)),i.push(encodeURIComponent(s));let r=this.client.buildURL(i.join("/"));if(Object.keys(n).length){n.download===!1&&delete n.download;const a=new URLSearchParams(n);r+=(r.includes("?")?"&":"?")+a}return r}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(s=>s?.token||"")}}class gn extends z{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,s){return s=Object.assign({method:"POST",body:{name:e}},s),this.client.send("/api/backups",s).then(()=>!0)}async upload(e,s){return s=Object.assign({method:"POST",body:e},s),this.client.send("/api/backups/upload",s).then(()=>!0)}async delete(e,s){return s=Object.assign({method:"DELETE"},s),this.client.send(`/api/backups/${encodeURIComponent(e)}`,s).then(()=>!0)}async restore(e,s){return s=Object.assign({method:"POST"},s),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,s).then(()=>!0)}getDownloadUrl(e,s){return console.warn("Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()"),this.getDownloadURL(e,s)}getDownloadURL(e,s){return this.client.buildURL(`/api/backups/${encodeURIComponent(s)}?token=${encodeURIComponent(e)}`)}}class bn extends z{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/crons",e)}async run(e,s){return s=Object.assign({method:"POST"},s),this.client.send(`/api/crons/${encodeURIComponent(e)}`,s).then(()=>!0)}}function Ve(t){return typeof Blob<"u"&&t instanceof Blob||typeof File<"u"&&t instanceof File||t!==null&&typeof t=="object"&&t.uri&&(typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal)}function Je(t){return t&&(t.constructor?.name==="FormData"||typeof FormData<"u"&&t instanceof FormData)}function vt(t){for(const e in t){const s=Array.isArray(t[e])?t[e]:[t[e]];for(const n of s)if(Ve(n))return!0}return!1}const mn=/^[\-\.\d]+$/;function St(t){if(typeof t!="string")return t;if(t=="true")return!0;if(t=="false")return!1;if((t[0]==="-"||t[0]>="0"&&t[0]<="9")&&mn.test(t)){let e=+t;if(""+e===t)return e}return t}class wn extends z{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(e){return this.subs[e]||(this.subs[e]=new vn(this.requests,e)),this.subs[e]}async send(e){const s=new FormData,n=[];for(let i=0;i<this.requests.length;i++){const r=this.requests[i];if(n.push({method:r.method,url:r.url,headers:r.headers,body:r.json}),r.files)for(let a in r.files){const o=r.files[a]||[];for(let c of o)s.append("requests."+i+"."+a,c)}}return s.append("@jsonPayload",JSON.stringify({requests:n})),e=Object.assign({method:"POST",body:s},e),this.client.send("/api/batch",e)}}class vn{constructor(e,s){this.requests=[],this.requests=e,this.collectionIdOrName=s}upsert(e,s){s=Object.assign({body:e||{}},s);const n={method:"PUT",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(n,s),this.requests.push(n)}create(e,s){s=Object.assign({body:e||{}},s);const n={method:"POST",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(n,s),this.requests.push(n)}update(e,s,n){n=Object.assign({body:s||{}},n);const i={method:"PATCH",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(i,n),this.requests.push(i)}delete(e,s){s=Object.assign({},s);const n={method:"DELETE",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(n,s),this.requests.push(n)}prepareRequest(e,s){if(rt(s),e.headers=s.headers,e.json={},e.files={},s.query!==void 0){const i=Vt(s.query);i&&(e.url+=(e.url.includes("?")?"&":"?")+i)}let n=s.body;Je(n)&&(n=function(r){let a={};return r.forEach((o,c)=>{if(c==="@jsonPayload"&&typeof o=="string")try{let u=JSON.parse(o);Object.assign(a,u)}catch(u){console.warn("@jsonPayload error:",u)}else a[c]!==void 0?(Array.isArray(a[c])||(a[c]=[a[c]]),a[c].push(St(o))):a[c]=St(o)}),a}(n));for(const i in n){const r=n[i];if(Ve(r))e.files[i]=e.files[i]||[],e.files[i].push(r);else if(Array.isArray(r)){const a=[],o=[];for(const c of r)Ve(c)?a.push(c):o.push(c);if(a.length>0&&a.length==r.length){e.files[i]=e.files[i]||[];for(let c of a)e.files[i].push(c)}else if(e.json[i]=o,a.length>0){let c=i;i.startsWith("+")||i.endsWith("+")||(c+="+"),e.files[c]=e.files[c]||[];for(let u of a)e.files[c].push(u)}}else e.json[i]=r}}}class Xt{get baseUrl(){return this.baseURL}set baseUrl(e){this.baseURL=e}constructor(e="/",s,n="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=e,this.lang=n,s?this.authStore=s:typeof window<"u"&&window.Deno?this.authStore=new it:this.authStore=new an,this.collections=new dn(this),this.files=new yn(this),this.logs=new fn(this),this.settings=new cn(this),this.realtime=new Jt(this),this.health=new pn(this),this.backups=new gn(this),this.crons=new bn(this)}get admins(){return this.collection("_superusers")}createBatch(){return new wn(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new hn(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,s){if(!s)return e;for(let n in s){let i=s[n];switch(typeof i){case"boolean":case"number":i=""+i;break;case"string":i="'"+i.replace(/'/g,"\\'")+"'";break;default:i=i===null?"null":i instanceof Date?"'"+i.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(i).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+n+"}",i)}return e}getFileUrl(e,s,n={}){return console.warn("Please replace pb.getFileUrl() with pb.files.getURL()"),this.files.getURL(e,s,n)}buildUrl(e){return console.warn("Please replace pb.buildUrl() with pb.buildURL()"),this.buildURL(e)}buildURL(e){let s=this.baseURL;return typeof window>"u"||!window.location||s.startsWith("https://")||s.startsWith("http://")||(s=window.location.origin?.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseURL.startsWith("/")||(s+=window.location.pathname||"/",s+=s.endsWith("/")?"":"/"),s+=this.baseURL),e&&(s+=s.endsWith("/")?"":"/",s+=e.startsWith("/")?e.substring(1):e),s}async send(e,s){s=this.initSendOptions(e,s);let n=this.buildURL(e);if(this.beforeSend){const i=Object.assign({},await this.beforeSend(n,s));i.url!==void 0||i.options!==void 0?(n=i.url||n,s=i.options||s):Object.keys(i).length&&(s=i,console?.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(s.query!==void 0){const i=Vt(s.query);i&&(n+=(n.includes("?")?"&":"?")+i),delete s.query}return this.getHeader(s.headers,"Content-Type")=="application/json"&&s.body&&typeof s.body!="string"&&(s.body=JSON.stringify(s.body)),(s.fetch||fetch)(n,s).then(async i=>{let r={};try{r=await i.json()}catch{}if(this.afterSend&&(r=await this.afterSend(i,r,s)),i.status>=400)throw new L({url:i.url,status:i.status,data:r});return r}).catch(i=>{throw new L(i)})}initSendOptions(e,s){if((s=Object.assign({method:"GET"},s)).body=function(i){if(typeof FormData>"u"||i===void 0||typeof i!="object"||i===null||Je(i)||!vt(i))return i;const r=new FormData;for(const a in i){const o=i[a];if(o!==void 0)if(typeof o!="object"||vt({data:o})){const c=Array.isArray(o)?o:[o];for(let u of c)r.append(a,u)}else{let c={};c[a]=o,r.append("@jsonPayload",JSON.stringify(c))}}return r}(s.body),rt(s),s.query=Object.assign({},s.params,s.query),s.requestKey===void 0&&(s.$autoCancel===!1||s.query.$autoCancel===!1?s.requestKey=null:(s.$cancelKey||s.query.$cancelKey)&&(s.requestKey=s.$cancelKey||s.query.$cancelKey)),delete s.$autoCancel,delete s.query.$autoCancel,delete s.$cancelKey,delete s.query.$cancelKey,this.getHeader(s.headers,"Content-Type")!==null||Je(s.body)||(s.headers=Object.assign({},s.headers,{"Content-Type":"application/json"})),this.getHeader(s.headers,"Accept-Language")===null&&(s.headers=Object.assign({},s.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(s.headers,"Authorization")===null&&(s.headers=Object.assign({},s.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&s.requestKey!==null){const n=s.requestKey||(s.method||"GET")+e;delete s.requestKey,this.cancelRequest(n);const i=new AbortController;this.cancelControllers[n]=i,s.signal=i.signal}return s}getHeader(e,s){e=e||{},s=s.toLowerCase();for(let n in e)if(n.toLowerCase()==s)return e[n];return null}}const B=new Xt("http://127.0.0.1:8090"),[Sn,On]=N(B.authStore.isValid),[zn,Cn]=N(B.authStore.record);B.authStore.onChange((t,e)=>{On(!!t),Cn(e)});const Zt=Ye(),ot=()=>{const t=Xe(Zt);if(!t)throw new Error("usePocketBase must be used within a PocketBaseProvider");return t};var Pn=K("<div>Please log in to access this page.");function Rn(t){return D(Oe,{get when(){return Sn()},get fallback(){return t.fallback||Pn()},get children(){return t.children}})}function An(){const t=ge(),[e,s]=N(!1),n=ze(()=>({mutationFn:async o=>{s(!0);try{return await B.collection("users").authWithPassword(o.email,o.password)}finally{s(!1)}},onSuccess:()=>{t.invalidateQueries()}})),i=ze(()=>({mutationFn:async o=>{s(!0);try{const c=await B.collection("users").create(o);return await B.collection("users").authWithPassword(o.email,o.password),c}finally{s(!1)}},onSuccess:()=>{t.invalidateQueries()}})),r=()=>{B.authStore.clear(),t.clear()},a=async(o,c)=>{s(!0);try{const u=await B.collection("_superusers").authWithPassword(o,c);return t.invalidateQueries(),u}finally{s(!1)}};return{login:n.mutateAsync,register:i.mutateAsync,loginAsAdmin:a,logout:r,loading:e,isLoading:()=>e()||n.isPending||i.isPending,loginError:()=>n.error,registerError:()=>i.error}}var En=K("<div>Please log in to access this page."),Tn=K('<div class="container mx-auto p-4"><h1 class="text-2xl font-bold mb-6">Dashboard'),In=K('<div class="min-h-screen bg-gray-50">'),qn=K("<p>Loading organizations..."),jn=K("<p>Error loading organizations: "),kn=K("<ul class=space-y-2>"),Fn=K('<div class="p-4 border rounded-lg shadow-md"><h2 class="text-xl font-semibold mb-4">Organizations</h2><form><input type=text name=title class="border rounded p-1"placeholder="New Organization Name"required><button type=submit class="ml-2 bg-blue-500 text-white p-1 rounded disabled:bg-gray-400">'),Dn=K("<li>"),Ln=K('<span class="text-gray-400 ml-2">(Saving...)');const xn=()=>En();function Un(){return os(async()=>{const{loginAsAdmin:t}=An();await t("admin@zahrawiclinic.com","changeme123")}),D(Zt.Provider,{value:B,get children(){return D(Ht,{client:Wt,get children(){var t=In();return Q(t,D(Rn,{get fallback(){return D(xn,{})},get children(){var e=Tn();return e.firstChild,Q(e,D(_n,{}),null),e}})),t}})}})}function Mn(t,e={}){const s=ot();return en(()=>({queryKey:[t,e.page??1,e.perPage??50,e.filter??"",e.sort??""],queryFn:async()=>(await s.collection(t).getList(e.page??1,e.perPage??50,{filter:e.filter,sort:e.sort})).items,staleTime:1e3*60*5}))}function Qn(t,e){const s=ot(),n=ge();return ze(()=>({mutationFn:async({data:i})=>{{const{id:r,...a}=i;return await s.collection(t).create(a)}},onMutate:async i=>{const{queryKey:r,data:a}=i;await n.cancelQueries({queryKey:r});const o=n.getQueryData(r);return o&&n.setQueryData(r,c=>[...c??[],a]),{previousData:o}},onError:(i,r,a)=>{console.error("Mutation failed:",i),a?.previousData&&n.setQueryData(r.queryKey,a.previousData)},onSettled:(i,r,a)=>{n.invalidateQueries({queryKey:a.queryKey})}}))}function Nn(t){const e=ot(),s=ge();Pt(()=>{const n=i=>{console.log("Realtime event:",i.action,i.record),s.invalidateQueries({queryKey:[t]})};e.collection(t).subscribe("*",n),ye(()=>{e.collection(t).unsubscribe("*").catch(i=>{console.error("Error unsubscribing:",i)})})})}function _n(){const t={page:1,perPage:50},e=["organizations",t.page,t.perPage,"",""],s=Mn("organizations",t),n=Qn("organizations");Nn("organizations");const i=r=>{const a={id:`temp-${Date.now()}`,organization_name:r,owners:["8gkeijxmbjenf6y"],address:"123 Main St"};n.mutate({data:a,queryKey:e})};return(()=>{var r=Fn(),a=r.firstChild,o=a.nextSibling,c=o.firstChild,u=c.nextSibling;return Q(r,D(Oe,{get when(){return s.isLoading},get children(){return qn()}}),o),Q(r,D(Oe,{get when(){return s.isError},get children(){var l=jn();return l.firstChild,Q(l,()=>s.error?.message,null),l}}),o),Q(r,D(Oe,{get when(){return s.isSuccess},get children(){var l=kn();return Q(l,D(bs,{get each(){return s.data},children:h=>(()=>{var f=Dn();return Q(f,()=>h.organization_name,null),Q(f,(()=>{var g=ms(()=>!!h.id.startsWith("temp-"));return()=>g()&&Ln()})(),null),f})()})),l}}),o),o.addEventListener("submit",l=>{l.preventDefault();const h=l.currentTarget,g=new FormData(h).get("title");g&&(i(g),h.reset())}),Q(u,()=>n.isPending?"Saving...":"Create"),oe(()=>u.disabled=n.isPending),r})()}const Kn=document.getElementById("root");vs(()=>D($n,{}),Kn);function $n(){return D(Ht,{client:Wt,get children(){return D(Un,{})}})}
